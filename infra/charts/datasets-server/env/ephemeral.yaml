mongodb:
  enabled: true

global:
  ephemeral: true
  # storage:
  #   enabled: true
  #   nfs: {"path":"/fsx","server":"svm-0006d5ba595c33b3e.fs-079a245c1521ad9fe.fsx.us-east-1.amazonaws.com"}

api:
  replicas: 1

  ingress:
    annotations:
      #external-dns.alpha.kubernetes.io/hostname: "*.datasets-server.us.dev.moon.huggingface.tech"
      external-dns.alpha.kubernetes.io/hostname: "datasets-server.us.dev.moon.huggingface.tech"
      alb.ingress.kubernetes.io/healthcheck-path: "/healthcheck"
      alb.ingress.kubernetes.io/listen-ports: "[{\"HTTP\": 80}]"
      alb.ingress.kubernetes.io/load-balancer-name: "hub-ephemeral"
      alb.ingress.kubernetes.io/group.name: "hub-ephemeral"
      alb.ingress.kubernetes.io/scheme: "internet-facing"
      alb.ingress.kubernetes.io/tags: "Env=ephemeral,Project=datasets-server,Terraform=true"
      kubernetes.io/ingress.class: "alb"
      alb.ingress.kubernetes.io/auth-type: "oidc"
      alb.ingress.kubernetes.io/auth-idp-oidc: '{"issuer":"https://hugging-face.okta.com","authorizationEndpoint":"https://hugging-face.okta.com/oauth2/v1/authorize","tokenEndpoint":"https://hugging-face.okta.com/oauth2/v1/token","userInfoEndpoint":"https://hugging-face.okta.com/oauth2/v1/userinfo","secretName":"sso-secret"}'

  resources:
    requests:
      cpu: 0.01
    limits:
      cpu: 1
